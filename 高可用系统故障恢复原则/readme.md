#高可用系统故障恢复原则

出处： [高可用故障恢复原则](http://mp.weixin.qq.com/s?__biz=MzA5MTE0MDUxMA==&mid=413779160&idx=1&sn=bf8d6d66403e0a03f86ed32fe7b019d2&scene=21#wechat_redirect)

## 故障信息的透明性

在故障发生时候，技术人员第一时间发现了故障，如果不能马上排除，则需要考虑是否将问题上报、以及将信息公示给所有用户。

保证信息透明需要有一定勇气

技术负责人主动承认问题发生，及时通报问题以便各部门采取合适的应对及支援手段，以便能*合理利用更多的资源*来更早的解决问题。及时公示问题给用户（比如通过官方微博及官方网站），以便争取用户的理解及支持。

## 故障突发性及解决的时限性

故障选择也大多处于类似被动的局面，当故障发生时候，用户访问系统受到影响，需要在尽可能短的时间内恢复服务。

但由于时间紧迫，负责人*可能没有足够的时间来分析故障的根本原因*，只能根据现象及已有经验迅速做出判断。

而且根据故障问题的不同，一些恢复手段如数据重建可能需要较长的时间，一些方案可能会超过用户容忍的极限，因此需要技术负责人在短时间内做出*快速解决故障*的选择。

## 故障中解决方案的技术的决定作用

故障时候仅能看到现象，很多时候还没来得及分析出根本的原因，因此技术负责人也很难当机立断提出非常确认的方案来解决问题。熟悉体系的程序员这时候可以发挥自身的能动性，小范围的去推测、尝试及验证，有有很大的机会更快的解决问题。

一些故障拖很长时间，有一定程度是团队成员没有有效手段，另外一个原因也许是团队成员群体思维，全部按照主流的思想或者负责人的思路去应对及处理，如果主流方法不是合适解法，有可能会将故障时间拉长。

还有一些公司将线上系统当成黑盒，工程师只需要将自己模块合并进去，无需关注线上运行状况。这种情况一旦出了可用性问题，大部分工程师是一筹莫展的，只能依靠少数几个精英来解决问题，通常不利于问题的迅速解决。

## 预留扩展能力的价值

我们在开发高可用系统时，大部分服务模块的代码都留了一个开关，可以在适当时候开启或者关闭一段代码。虽然在99.9%的场景下这个开关不起作用，但在灾难事故发生时候，可能一个小小的开关犹如发生故障时玻璃窗旁边的救生锤，可以决定整个事故的走向。



